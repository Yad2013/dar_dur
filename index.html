<!DOCTYPE html>
<html>
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
@font-face {
 font-family: amiri;
 src: url('res/amiri-regular.woff');
}
@font-face {
 font-family: noto;
 src: url('res/noto.ttf');
 }
@font-face{
font-family: simplified;
src: url('res/arial.ttf');
}
@font-face{
font-family: naskh;
src: url('res/quran_naskh.ttf');
}
a{
text-decoration:none;
color:#000;  
}
a:hover{
	color:red;
	cursor:pointer;
	}
b{
font-weight:400;
}
#con{
font-family:amiri;
}
#pic{
	width:100%;
	}
#lno{
	font-size:20px;
  direction:rtl;
  position:absolute;
  top:0px;
  left:10px;
	}
#txt{
	font-size:40px;
	width:100%;
	text-align:center;
  direction:rtl;
  line-height:180%;
	}
#bd{
	text-align:right;
  direction:rtl;
  line-height:150%;
  padding:10px;
	}
#ft{
  border:0px red solid;
  width:100%;
  text-align:left;
  direction:ltr;
  display:flex;
	}
#cp{
	height:40px;
	}
#cc{
  color:#fff;
  background-color:#00f;
  width:150px;
  height:150px;
  border-radius:75px;
  margin:20px;
	font-size:40px;
  line-height:170%;
  text-align: center;
 }
#ftb{
  width:100%;
  text-align:center;
  line-height:150%;
  position:fixed;
  bottom:4px;
  transition: bottom 0.3s;
	}
#cvs{
  position:absolute;
  top:0px;
  right:0px;
  z-index:-1;
  border:0px gray solid;
	}
button{
  width:60px;
  height:40px;
  border-radius:4px;
  border:1px solid #aaa;
 }
button:hover{
  background:#ddd;
  }
.pressed{
  color:#f00;
  }
#dau, #fnb{
	font-size:30px;
  line-height:30%;
  }
.red{
  color:#f00;
  }
.blue{
  color:#00f;
  }
.green{
  color:#0f0;
  }
h2{
	font-size:20px;
	width:100%;
	text-align:left;
  line-height:100%;
  margin-top:20px;
  margin-bottom:4px;
	}
.etxt{
  font-family:arial;
	font-size:18px;
	direction:ltr;
	text-align:left;
  line-height:100%;
	}
.cg{
  display: grid;
  grid-template-columns: auto auto auto auto;
  }
.cgw{
  display: grid;
  grid-template-columns: auto;
  }
.ce{
  border: 1px solid rgba(0, 0, 0, 0.1);
  text-align: center;
  font-size:60px;
  line-height:160%;
  padding:10px;
  }
.cew{
  text-align: center;
  font-size:24px;
  line-height:100%;
  padding:2px;
  }
table{
  width:100%;
  }
td{
  /* width:33%; */
  }
img{
  vertical-align:middle;
  }

p{
    font-family: Arial, Helvetica, sans-serif;
    font-size:26px;
    }
w-d:hover{
    color:red;
    cursor:pointer;
    /* border:1px #ccc solid; */
    background-color: #eee;
    border-radius: 6px;
    }
    
w-d {
    position: relative;
}
t-t{
    background-color:#555;
    color: #fff;
    text-align: center;
    white-space: nowrap;
    border-radius: 6px;
    padding: 4px 10px;
    position: absolute;
    z-index: 1;
    /* bottom:120%; */
    }

t-t p{
    font-family: amiri;
    line-height: 100%;
    margin: 0;
    padding: 4px;
    }
t-t b{
    position: absolute;
    top: 100%;
    /* left: 40%; */
    border-width: 6px;
    border-style: solid;
    border-color: #555 transparent transparent transparent;
    }
t-t:hover {
    /* visibility: visible; */
    color:yellow;
    cursor:pointer;
    }
@media screen and (orientation:landscape) {
	#pic{
		float:left;
		width:49%;
    margin-right:1%;
		}
	#txt{
    margin-top:20px;
		float:left;
		font-size:80px;
		width:50%;
    line-height:180%;
	  }
 .cc{
    color:#fff;
    background-color:#00f;
    width:200px;
    height:200px;
    border-radius:150px;
    margin:20px;
    font-size:60px;
    line-height:170%;
    text-align: center;
    }
  .cgw{
    display: grid;
    grid-template-columns: auto auto;
    }
 }
</style>
</head>
<body id="body" ondblclick="toggle_buttons()" onload="load_page()">
<div id=con>
<div id=lno></div>
<div id=pic>
<img id=imageid src="res/p01.jpg" onclick="load_page()" width=100%>
</div>

<div id=txt></div>
</div>
<div style="height:50px;"></div>
<div id=ftb>
<button id=more onclick="get_more()">
  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
</button>

<button onclick="gototoc()">
 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"></path></svg>
 </button>
 <!--
 -->
 <button id=play onclick="play_lesson()">
 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"></path><path d="M8 5v14l11-7z"></path></svg>
 </button>
 <button onclick="prev()">
 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
 </button>
 <button onclick="next()">
 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"></path></svg>
 </button>
</div>

<script>
const la=[
"nauerok||",
"dar| dar dar dar|",
"dur| dar dur dar dur # dud # dud dar dud| dur # u",
"daran| daran daran # nar # nar nur| daran # n",
"dada dud| dada dada dud # dar daran dur|",
"zad| zad dada, zad zuzu # dar dur, nar nur| zad # z",
"nuri:| razi: # nuri: # zarani:| nuri: # i:",
"zi:r| zi:r zi:ri: # zi:ran # nuri: nuri: # zi:ri: zi:ri:| zi:r # i:_",
"razi:| razi: zar nuri: # nuri: zar razi: # dada dada # razi:, nuri:, zuzu zaruna|",
"nar nur| nar, nur # ni:r, ni:ran # di:nar, di:naran|",
"di:_na| di:_na duri: nazdar # nuri: zar nazdar # razi: zar di:_na|",
"di:_na| di:_na, nuri:, razi: zaruni: # di:_nari: # di:_nar zuzu # di:_naran|",
"nar nar| di:_na, zuzu, nuri:, razi: # ni:ran, ni:ran # dar di:_na dari: # zad nuri: zadi:|",
"zab| bab # bab dar razi: # bab baban bab_i: # baz bazi: # nab nab_i:| zab # b",
"bazan| bazan # bi:r # buran # baba baba bazan # bazi: baz buran # bi:r dar nuri:|",
"r~bab b~dran| b~dran zar~ r~bab # r~bab zuri: buran # razi: zad~ d~nani:ri:| r~bab # ~",
"b~_dri: b~_di:n| b~_dri: b~_di:n # nuri: r~zi:n # zadi: z~bi:b # razi: r~bi:b b~dri: # dar r~bab|",
"bum| n~di:_m nam~ # r~z~m~ nuri: b~ri:di:| bum # m",
"mi:zan| mi:zan # m~nam r~mzi: # m~nam m~rdan # ma nam~ n~di:_m| mi:zan # m_",
"buq| buq m~rzuq # q~bqab # q~bqabi: # q~bqab di:na # q~bqab r~mzi:| buq # q",
"q~dri:| q~dri: qad~ b~q~r~na # qam~ n~di:_m # dari: q~ri:b # buqi: r~qi:q |",
"q~_d$uri:| q~_d$uri: q~_z$az # q~_dri: r~b$ana # nuri: b~_z$az # r~z$uq d~q$ bab~_na # mi:zan # q~_b$an| q~_d$uri: # $",
"q@_rd| ram@_z q~d@m m@n dar@na # m~_r$~ maz@n m@n d~rb@na # qad@r d~r$~b~ bazi: # m@nqar # m@br~d| q@_rd # @",
"d&b| z&nbur # z&rzur # r&z # r&m$an # q&m nuri:, z&r m&ni:r # m&_rad m&di:r q~di:r| d&b # &",
"r~f| r~f # far # ri:f # fi: dar@ m&fi:d far # m~naf n~d$af f~qi:r # f~ri:d f~r$~ m@n dar@ m&ni:f # r~di:f r~fi:q faruq # f~ri:q f~n$an q~di:r | rf # f",
"ful| ful # fi:l # fi: z@nbi:l n~bi:l ful # qal~ b~di:l, zam@l b~q$al # fi: m~nz@l@ nad@r b@rmi:l | ful # l",
"b&lb&l& l~bib | b&lb&l& l~bib # l~bid m@n l&bnan # q~l~b~ l~bib b@rmili: # b&lb&l # l~ql~q |",
"r@da> | r@da>, b@na> # ma>,  a^&nbub # a_@briq, a^~rn~b # a^~bu a^~min b~n$a> # a^~rad a^~dib a_@briq ma> # a^~bi: a^~m~r~ni: a^~n a^~qr~a^~ | rda> # >",
"a_@zar& a^&m$i: | a_@zar& a^&m$i: a^~zr~q # fi: a_@na>@ m&nib ma> # q~r~a^~ a^~dib # b~d~a^na n~qra^& # a_@qr~a^ a_@qr~a^ a^~mami: # a^&m$& a^~mir fi: a^~rbil # a^&rid& a^~n a^~zur~ a^~min |",
"b@<r | ma>& b@<r@na bar@d # ra<@f qa<@d fi: a^~rbil # ma<i: fi: a_@na<i: q~lil # fa<@z  a^~qr~b& m@n fa<@q | b<r # <_",
"b~l$ut^ | b~l$ut^, q@t^ # b~t^, t^abuq # q@t^ar, b~t^at^a # fi: t^~b~q@ t^ar@q b~l$ut^ # bazna t^ar~ m@n dar@ t^al@b # l&t^fi: t^~l~b~ t^&bul~na | blut^ # t^",
"f~rd&:| q@t^ar&: qad@m&:# l~na baz&:, l@lbaz@ m@nqar&: # zad&na q~lil&:, t^ar@q t^~bib&: # d~rb&na q~rib&:, a^~mam~na bab&: lt^if&: # m~a^mun qa<@d&: q~dir&: # l&t^fi: t^~b$al&:| frd&: # &:",
"u~rd&:| u~rd&:, u~z$&:, z~ur~q&: # l&t^fi: u~q~f~ u~ra>~ z~ur~q@na # u~lid a^t^u~l& m@n m~ruan # ua<@l uaq@f&: u~ra>~ u@dad # buq m~ulud m@n u~r~q |",
"i~d| i~d , z@iad , t^&iur # i&rid&  z~idun t^&iur z~idan # i~nam z@iad fi: dar a^~i$ub # q~dri: i~dri: a^~in~ i~nam& z@iad # b~in~ dar@na u~ dar@ z~in~b~ m~idan # u~lid t^~i$ar&: i~t^ir& |",
"a~lfil&, a^~nf& a:lfil@| a~lbu$ab& qad@m&:, a~lu~l~d& na<@m&: # a~lqa<@d& q~dir&:, a~lb~qal& a^~min&: # a^~nf& a:lfil@ # q~f~z~ a:lu~l~d& m@n f~uq@ a:lb@rmil@ # t^ar~ a:lb&lb&l& u~ a:lbaz& | a:lfil # a:",
"l~blab| b@lal lai~nam& fi: dar@ t^~lal # a~la^~rn~b&, a~la^&m$&, a~la_@briq& # f~r$~ a:la^~rn~b& m@n dar@ a:la^~mir@ # a~la^&m$& u~ a:la^~b& i&r~bi$an@ a:la^~ulad~ | lblab # la",
"b~nat| b~nat, t^al@bat #n~bat, f&rat # d~lal faz~t, z~in~b nad~t # a^nt~ q~r~a^t~, a^~na ma q~r~a^t& # t~l$&: # t~l$&: m@n t&rab # fi: b~it@ t^~lal t~mr&: u~ tin # a^&m$i: t~qul& : d~lal t~qr~a^& | bnat # t",
"t~mr&:| t~mr&:, z~itun&:, tin&: # z~it&na q~lil&: # a^~nt&m t^~l~bt&m z~it~ z~itun # b~tul b@nt& t~m$am t~qul& :# a^~ma r~a^~it&ma b~it~na? |",
"fanus| klmat | fanus # s",
"a~lz$~itun| klmat |",
"a~lq~m~r& m&nir&:| klmat |",
"i~rbu`| klmat | irbu` # `",
"`@n~b&:| klmat | `nb # `_",
"b~_`_ir| klmat | b_`_ir # _`_",
"aas| klmat | aas # aa",
"m~r`i$:| klmat | mr`i$: # i$:",
"t^~rbus^| klmat | t^rbus^ # s^",
"s^~`ir| klmat | s^`ir # s^_",
"a^&stad:| klmat | a^stad: # d:",
"nara~: nar@:| klmat | nara~: nar@: # ~:",
"s^&b$ak| klmat | s^bak # k",
"k&rsi:$&:| k&rsi:$&: m~ksur&: | krsi: # k_",
"d&k$an| klmat |",
"aah| klmat | aah # h",
"h&dh&d| klmat | hdhd # h_",
"m&_h_r&:| klmat | m_h_r # _h_",
"d~uae:| da<@r~e:&: q~nt^~r~e:&:, fa<@z~e:&: f~tae:&: # a~lt^$~i$ar~e:& t~t^ir& # saf~r~ s~lim&: b@s~i$ar~e:@: # sa`~e:&: # d~r~sna fi: a:ls$a`~e:@ a:ls$ab@`~e:@ # n~s@it& k&r$as~e:~ a:lr$~sm@ fi: a:lm~dr~s~e:@ # s^~uk~e:&:, m@l`~q~e:&:, `&lb~e:&: | duae: # e:",
"h$:d:a| h$:d:a, d:$:l@k~ # h$:d:a h@r$&:, h$:d:@h@ h@r$~e:&: # h$:d:a dik&:, h$:d:@h@ b~t^$~e:&: # d:$:l@k~ fil&:, d:$:l@k~ m&hr&: # h$:u^&la>@ m@n~ a:l`~s^ir~e:@ # ma s^a>~ a:ll$$:h # a_@n s^a>~ a:ll$$:h | h$:d:a # $:",
"r~q$as:| r~q$as:& a:ls$a`~e:@ # a~lb~q$& i~qr&s:& # h$:d:a m@q~s:$&: # faruq i~q&s:$& a:lq~mis:~ | rqas: # s:",
"s:~i$ad| s:~diq&na s:~i$ad&: # s:ad@q u~s:~l~ a:lm~us:@l~ # u~q~f~ a:lt^$&lab& a^~mam a:ls:$&fuf@ # m~ns:ur r~ui$: l~na q@s:$~e:~: q~s:ir~e:~: # `&s:fur& s:ab@r t^ar~ m@n q~f~s:@h@ | s:iad # s:_",
"a~ls^$~ms& t^al@`~e:&:| a~ls^$~ms& t^al@`~e:&: # a~ls:$~i$ad& uaq@f&: # a~lk~lb& na<@m&: # a~l`~l~m& m~rfu`&: # a~lh@r$& i&t^ar@d& a:lfa^r~e:~ # a~lfa^r~e:& t~hr&b& # a~ld:$&bab& m~d:mum&: |",
"t&f$ah^| s:~lah^ f~l$ah^ # a~lm@ftah^& `@nd~ s:~bah^ # m~_mduh^ i~kt&b `li$: a:ll$~uh^@ # m~fatih^ # a~lm~fatih^& b@albab@ # a~lb~t^$~e:& t~sb~h^& # s:al@h^ d:~b~h^~ a:l~bq~re:~ | tfah^ # h^",
"h^@mar| s:&nduq&: m@n h^~did@: # m@ndil&: m@n h^~rir@: # h^~s$an h^~d$ad&: # h^~s~n h^~l$aq&: # h^&s~in h^~m$al&: # h^~diq~e:&: uas@`~e:&: | h^mar # h^_",
"s:~h^_n&:| m~h^as@n t~t~`~l$~m& a:lh^@sab~ # h^~mdi: i~bi`& a:lf~h^m~ # m~h^ruse:& t~h^l&b& a:lb~q~r~e:~ # m~h^mud f~l$ah^&: i~h^s:&d& a:lq~mh^~ |",
"za`^| d~b$a`^, s:~b$a`^, far@`^ # r&s`^ # a~ls:$~ba`^& i~s:b&`^& # a~ld$~b$a`^& i:~db&`^& # `^~zal # `@nd~ s&`ad `^@rbal&: # `^~s$an i~r`i$: `^~n~ma~: # a~lb&lb&l& `^~r$~d~ | za`^ # `^",
"b~`^l&:| a~l`^&lam& r~k@b~ a:lb~`^l~e:~ # a~lbnt& t~`^z@l& fi: a:l`^&rf~e:@ # b~`^dad `as:@m~e:& a:l`@raq # a~lma>& i~`^li: # b~b$~`^a>, m@`^z~l | b`^l # `^_",
"h^~uz:| r@iaz: i~rk&z:& u~ra>~ a:la^~rn~b@ # r@iaz: u~q~`~ `~li$: a:la^~rz:@ # z:@fd~`&: # a~lz:$@fd~`~e:& t~qf@z& fi: a:lh^~uz:@ # a~l`^&rf~e:& z:~i$q~e:&: # a~lr$~uz:~e:& b~di`~e:&: | h^uz: # z:",
"b~iz:~e:&:| i~a^kl& r@iaz: b~iz:~e:~: # n@z:al t~kt&b& # h$:d:@h@ m@nz:~d~ti: #  m&z:~r i~z:h^~k& | biz:e: # z:_",
"tac| a~ld$~r~c& a^~`u~c&: # a~lh^~l$aq& a^~`r~c&: # a_@sf~nc # h$:d:a a_@sf~nc&: # a~lf~tae:& t~ns@c& s~l$~e:~: | tac # c",
"c~_r~s&:| d&q$~ c~r~s& a:ld$~rs@ # h$:d:a c@sr&: c~did&: # naci: a@cl@s c~nbi: # a~ld$~cac~e:& baz:~t # c~mil~e:& ca`~t # a~lz$&cac~e:& z:a`~t | crs # c_",
"m@nc~l&:| klmat |",
"m@h^rat:| l~it:&: i:~h^r&t:& # t:~`l~b&: # h$:d:a  t:~`l~b&: s:~`^i:r&: | mh^rat: # t:",
"m@nfax| klmat | mnfax # x",
"x~ruf| klmat | xruf # x_",
"m&nx&l&:| klmat |",
"m~h^fud^| klmat | mh^fud^ # d^",
"qal~ alm&`~l$@m& l@t~lamid:@h@| klmat |",
"lah^@d^| klmat |",
"ala^~`dad& 1-5| klmat |",
"ala^~`dad& 6-10| klmat |",
"q@t^$~ti:| klmat |",
"l~`@b~ ius&f& m~`~ a:lk~lb@| klmat |",
"n@hai~e:& alk@tab@| a^nt~ alaan t~st~t^@i`& a^n t~qr~a^~ a^~i:$~ k@tab~e:@: b@all&`^~e:@ al`~r~bi$e:@. # l@a^~n$~ k&l$& ma hu~ m~ktub&:, m&k~u$~n&: m@n hd:@h@ alh^&ruf@ u alh^~r~kat@ al$~ti: t~`~l$~mt~ha. # m~bruk! |"
];

const ca=[
 "|||",
 "a|dar|A|1",
 "b|zab|B|13",
 "t|b~nat|T|36",
 "t:|m@h^rat:|Th|71",
 "c|tac|J|68",
 "h^|t&f$ah^||61",
 "x|m@nfax|Kh|72",
 "d|dar|D|1",
 "d:|a^&stad:|D|48",
 "r|dar|R|1",
 "z|zad|Z|5",
 "s|fanus|S|38",
 "s^|t^~rbus^|Sh|46",
 "s:|r~q$as:|S|58",
 "z:|h^~uz:|Dh|66",
 "t^|b~l$ut^|T|30",
 "d^|m~h^fud^|S|75",
 "`|i~rbu`||41",
 "`^|za`^||64",
 "f|r~f|F|24",
 "q|buq|Q|19",
 "k|s^&b$ak|K|50",
 "l|ful|L|25",
 "m|bum|M|17",
 "n|daran|N|3",
 "h|aah|H|53",
 "u|dur|U,W|2",
 "i:|nuri:|I,Y|6",
 "h_|h_&dh_&d||54",
 "e:|d~uae:|T|56",
 "u^|bu>re:||29",
 "i|mr`i$:|I,Y|45",
 "<|rd<||29",
 "la|l~blab|La|35",
 ">|r@da>||27",
 "<_|b@<_r||29",
 "a^|a^~rn~b|A|27",
 "a_|a<@bri:q|I,E|27",
 "aa|aas|A|44",
 "a:|a:lfi:l||34",
 "__~_|r~bab|A|15",
 "__@_|q@rd|I|22",
 "__&_|d&b|U|23",
 "__$_|q~d$uri:||21",
 "__~:_|nara~:||49",
 "__@:_|nar@:||49",
 "__&:_|frd&:||32",
 "__$:_|h$:d:a||57"
 ];

const PAUSE="<svg xmlns='http://www.w3.org/2000/svg' height='24px' viewBox='0 0 24 24' width='24px' fill='#000000'><path d='M0 0h24v24H0V0z' fill='none'/><path d='M6 19h4V5H6v14zm8-14v14h4V5h-4z'/></svg>";
const PLAY="<svg xmlns='http://www.w3.org/2000/svg' height='24px' viewBox='0 0 24 24' width='24px' fill='currentColor'><path d='M0 0h24v24H0z' fill='none'></path><path d='M8 5v14l11-7z'></path></svg>";

var i=1;
var rd="y";
var red=1;
var fnt=0; // font 0: amiri 1: noto 2: simplified 
var ttl=1; // tooltip language 0:none 1: kur 2: arab 3: eng
var hlf=0;
var dcr=1;
var qs=window.location.search;
qs=qs.replaceAll("?","");
var qsa=qs.split("&")
var qpa={};
for(j in qsa) {
  tqa=qsa[j].split("=");
  qpa[tqa[0]]=tqa[1]
  }
if("lesson" in qpa) {i=qpa["lesson"]; localStorage.setItem("DARA_LESSON_NO", i);}

if(localStorage.getItem("DARA_LESSON_NO")===null) localStorage.setItem("DARA_LESSON_NO", 1); else i=localStorage.getItem("DARA_LESSON_NO");
if(localStorage.getItem("DARA_LESSON_VOICE")===null) localStorage.setItem("DARA_LESSON_VOICE", rd); else rd=localStorage.getItem("DARA_LESSON_VOICE");
if(localStorage.getItem("DARA_LESSON_RED")===null) localStorage.setItem("DARA_LESSON_RED", red); else red=localStorage.getItem("DARA_LESSON_RED");
if(localStorage.getItem("DARA_LESSON_FONT")===null) localStorage.setItem("DARA_LESSON_FONT", fnt); else fnt=localStorage.getItem("DARA_LESSON_FONT");


// window.onload=load_page();

function ps(id){
  var aid="a"+id;
	// document.getElementById(aid).play();
  rd="y";
  var audio = new Audio("res/"+rd+"/a"+id+".mp3");
  audio.play();
	}

function next(){
 if(i<la.length-1) i++;
 localStorage.setItem("DARA_LESSON_NO", i)
 k=0;
 playing=1;
 load_page()
 window.scrollTo(0,0);
 }
 
function prev(){
 if(i>0) i--;
 localStorage.setItem("DARA_LESSON_NO", i)
 k=0;
 playing=1;
 load_page()
 window.scrollTo(0,0);
 }

function get_more(){
  clearTimeout(timer);
  k=0;
  document.getElementById("play").innerHTML=PLAY;
  var dau=red==0?"دور":"د<w-d class=red>و</w-d>ر";
  var hnw=`<button id=dau onclick="highlight()">${dau}</button`;
  const ddd="دار";
  var fnb=`<button id=fnb onclick="change_font()">${ddd}</button`;
  let voice="<button class=red onclick=change_ttl(1)>Kur</button> <button onclick=change_ttl(3)>Eng</button> <button onclick=change_ttl(0)>None</button>";
  if(ttl==3) voice="<button onclick=change_ttl(1)>Kur</button> <button class=red onclick=change_ttl(3)>Eng</button> <button onclick=change_ttl(0)>None</button>";
  if(ttl==0) voice="<button onclick=change_ttl(1)>Kur</button> <button onclick=change_ttl(3)>Eng</button> <button class=red onclick=change_ttl(0)>None</button>";
  const t=`
<h2>Settings</h2>
<div class=etxt>
<table>
<tr valign=top>
<td>
Translation:</td><td align=right>${voice}</td>
</tr>
<tr>
<td>Hightlight:</td><td align=right>${hnw}</<td>
</tr>
<tr>
<td>Change Font:</td><td align=right>${fnb}</<td>
</tr>
</table>
</div>
<h2>Shortcuts</h2>
<div class=etxt>
Arrows: Next and previous lessons<br>
Escape: Hide menu<br>
Numbers 1-9: Go to lesson<br>
Number 0: Contents<br>
p: Play lesson<br>
t: Translation language<br>
r: Red highlight of new letter<br>
f: Font change<br>
d: Toggle diacritics<br>
h: Horizontal line toggle (some lessons)<br>
l: Letters<br>
w: Words and letters<br>
m: Menu toggle<br>
s: Settigs page<br>
b: Back to lesson (from settings)<br>
</div>
<h2>Credits</h2>
<div class=etxt>
Text entry: Yad and Sarwan (10 years)<br>
Coding: Yad (with some help from dad)<br>
Voice: Yad (9 years old in 2022)<br>
Audio recording and processing: Yad<br><br>
<a href=https://montessorikurdistan.com target=_blank>Montessori Kurdistan</br>
</div>
  `;
  document.getElementById("txt").innerHTML=t;
  document.getElementById("dau").style=`font-family:${fnf}`;
  document.getElementById("fnb").style=`font-family:${fnf}`;
  }

function get_char_grid(m){
  clearTimeout(timer);
  k=0;
  document.getElementById("play").innerHTML=PLAY;
  var t;
  t=m==2?"<div class=cgw>":"<div class=cg>";
  for(j=1; j<ca.length; j++){
    cea=ca[j].split("|");
    cet=eng_to_kur(cea[0]);
    cew=eng_to_kur(cea[1]);
    if(red) cew=cew.replaceAll(cet,"<span class=red>"+cet+"</span>");
    var n=cea[3];
    var n0=n.toString();
    n0=n0.padStart(2,"0");
    t+=m==2?" <div class=ce><table><tr><td><a onclick='goto("+n+")'>"+cet+"</a></td><td><div class=cew>"+cew+"</div></td><td valign=bottom><img src=res/p"+n0+".jpg height=80px></td></tr></table></div> ":"<div class=ce><a onclick='goto("+n+")'>"+cet+"</a></div>";
    }
  t+="</div>"
  document.getElementById("imageid").src="res/p00.jpg";
  document.getElementById("txt").innerHTML=t;
  }

function load_page(){
  i=parseInt(i);
  var con=document.getElementById("con");
  if (fnt==0) fnf="amiri";
  if (fnt==1) fnf="noto";
  if (fnt==2) fnf="simplified";
  if (fnt==3) fnf="naskh, amiri";
  con.style.fontFamily=fnf;
  var is=i.toString();
  var i0=is.padStart(2,"0");
  document.getElementById("imageid").src="res/p" + i0 + ".jpg";
  var t=la[i];
  var ta=t.split("|");
  if(dcr==0) t=remove_diacritics(t);
  t=eng_to_kur(t);
  t=add_tags(t);
  if(i==0) t=toc();
  t+="<canvas id=cvs></canvas>";
  document.getElementById("txt").innerHTML=t;
  var lno=i>0?eng_to_kur(is):"";
  document.getElementById("lno").innerHTML=lno;
  const fsa=[40,60,60,60,60,50,50,45];
  var fs=40;
  if(i>fsa.length) fs=fsa[0]; else fs=fsa[i];
  if(!is_mobile()) fs=fs*1.4;
  document.getElementById("txt").style.fontSize=fs+"px";
  if(i==1 || i==2 || i==3) document.getElementById("bd").style.textAlign="center";
  if(i>14) {
    // document.getElementById("cc").style.lineHeight="40%";
    document.getElementById("bd").style.lineHeight="200%";
    } // else document.getElementById("bd").style.lineHeight="150%";
  if(hlf && (i==4 || i==5 || i==15 || i==16)){
    var cvs=document.getElementById("cvs");
    cvs.width=680;
    cvs.height=600;
    var ctx=cvs.getContext("2d");
    ctx.lineWidth=1;
    ctx.strokeStyle="#ccc";
    var hla=[103,251,378];
    if(i==15 || i==16) hla=[71,173,257,341,425];
    for (j in hla){
      var ht=hla[j];
      ctx.beginPath();
      ctx.moveTo(0, ht);
      ctx.lineTo(680, ht);
      ctx.stroke();
      }
    }
  if(i==32 || i==41 || i==42 || i==43 || i==44) {
    // document.getElementById("cc").style.lineHeight="200%";
    }
  }

function gototoc(){
 i=0;
 prev();
 }

function goto(lc){
 i=lc-1;
 next();
 }
 
function toc(){
 let rv="<div id=bd>";
 let pit="alh^ruf";
 pit=eng_to_kur(pit);
 rv+="<a onclick='get_char_grid(1)'>"+pit+"</a><br>"
 pit="alh^ruf u alklmat";
 pit=eng_to_kur(pit);
 rv+="<a onclick='get_char_grid(2)'>"+pit+"</a><br>"
// remove classes yt
 pit="a^`^nie: alh^ruf";
 pit=eng_to_kur(pit);
 rv+=`<a href="https://www.youtube.com/watch?v=hFjmAXR1PkY" target=_blank>${pit}</a><br>`;
 for (var j=1;j<la.length;j++){
 var ta=la[j].split("|");
 if(ta[0]=="") ta[0]="dara dara";
 var t=eng_to_kur(ta[0]);
 var jk=eng_to_kur(j+"");
 let c="";
 const al=[6,27,30,34,44,45,48,53,56,58,66,71,75];
 const ad=[15,21,22,23,31,49,57];
 if(al.includes(j)) c="red";
 if(ad.includes(j)) c="green";
 tt=`<b class=${c}>${jk}</b>. <a onclick='goto(${j})'>${t}</a><br>`;
 rv+=tt;
 }
 rv+="</div>";
 rv=rv.replaceAll("+"," ");
 return rv;
 }

document.addEventListener("keydown",event=>{
  if (event.key==="ArrowRight") next();
  if (event.key==="ArrowLeft") prev();
  if (event.key==="Escape") document.getElementById("ftb").style.bottom = "-50px";
  
  if (event.key==="b") load_page();
  if (event.key==="p") play_lesson();
  if (event.key==="s") get_more();
  if (event.key==="l") get_char_grid(1);
  if (event.key==="w") get_char_grid(2);
  if (event.key==="h") {hlf=!hlf; load_page();}
  // if (event.key==="t") {rd="t"; load_page(); localStorage.setItem("DARA_LESSON_VOICE", rd);}
  if (event.key==="y") {rd="y"; load_page(); localStorage.setItem("DARA_LESSON_VOICE", rd);}
  if (event.key==="m") if(document.getElementById("ftb").style.bottom=="4px") document.getElementById("ftb").style.bottom="-50px"; else document.getElementById("ftb").style.bottom="4px";
  
  if (event.key==="r") {if(red==0) red=1; else red=0; localStorage.setItem("DARA_LESSON_RED", red); load_page();}
  if (event.key==="f") change_font();
  if (event.key==="t") change_ttl(-1);
  if (event.key==="d") toggle_diacritics();

  if (event.key > -1 && event.key < 10){
    i=event.key;
    i++;
    prev();
    }
  });

function highlight(){
  if(red==0) red=1; else red=0;
  localStorage.setItem("DARA_LESSON_RED", red);
  load_page();
  }

function voice(v){
  if(rd=="t") rd="y"; else rd="t";
  localStorage.setItem("DARA_LESSON_VOICE", rd);
  load_page();
  }

function change_font() {
  fnt++;
  if(fnt>3) fnt=0; 
  localStorage.setItem("DARA_LESSON_FONT", fnt);
  load_page();
  }

function change_ttl(n) {
  ttl++;
  if(ttl>3) ttl=0;
  if(n>-1) ttl=n;
  // localStorage.setItem("DARA_LESSON_FONT", fnt);
  load_page();
  }

function add_tags(t){
 var rv="";
 var wa=t.split(" ");
 var k=0;
 for (j in wa){
   var i0=i.toString();
   var i0=i0.padStart(2,"0");
   var k0=k.toString();
   var k0=k0.padStart(2,"0");
   var w=wa[j];
   var tw="";
   var lc=w.slice(-1);
   if(lc=="."|| lc=="،"|| lc=="!"|| lc=="؟"|| lc=="|") {
     w=w.slice(0,-1);
    //  tw="<a id=w"+i0+k0+" onclick=ps('"+i0+k0+"')>"+w+"</a>"+lc+" ";
     tw=`<w-d id=${i0+k0} onclick=ps('${i0}${k0}')>${w}</w-d>`+lc+" ";
    } else{
    //  tw="<a id=w"+i0+k0+" onclick=ps('"+i0+k0+"')>"+w+"</a> ";
     tw=`<w-d id=${i0+k0} onclick=ps('${i0}${k0}')>${w}</w-d> `;
    }
   if(w=="|" || w=="#" || w=="-" || w==" ") tw=w+" ";
   rv+=tw;
   if(w!="|" && w!="#" && w!="-") k++
 }
 var a=rv.split("|");
 var tt="<div id=tt>"+a[0]+"</div>";
 var bd="<div id=bd>"+a[1]+"</div>";
 var cc="<div id=ft><div id=cc>"+a[2]+"</div>"; //<div id=cp><img src='res/p"+i0+".jpg' width=100px></div></div>";
 if(a[2].trim()=="") cc="";
 rv=tt+bd+cc;
 rv=rv.replaceAll("#","<br>");
 rv=rv.replaceAll("+"," ");
 var cl=wa[wa.length-1];
 zwjb="";
 zwja="";
 let cla=["",""];
 if(red!=0 && i>0 && cl.length>0){
  if(cl=="\u064B"||cl=="\u064C"||cl=="\u064E"||cl=="\u064F"||cl=="\u0650"||cl=="\u0651"||cl=="\u0670") zwjb="\u200B";
  if(cl=="\u0629"||cl=="\u0637"||cl=="\u0635"||cl=="\u0640"||cl=="\u0641"||cl=="\u0642"||cl=="\u0643"||cl=="\u0644"||cl=="\u0645"||cl=="\u0647") zwja="\u200B";
  if(cl=="ء"){
    rv=rv.replaceAll("أ","<span class=red>أ</span>");
    rv=rv.replaceAll("إ","<span class=red>إ</span>");
    }
  if(cl=="\u064B"){ // FATHATAN
    rv=rv.replaceAll("\u064D","<span class=red>\u200B\u064D</span>");
    }
  if(cl=="لا"){
    rv=rv.replaceAll("لأ","<span class=red>لأ</span>");
    rv=rv.replaceAll("لإ","<span class=red>لإ</span>");
    }
  if(cl.length>1){
    cla=cl.split('');
    if(cla[1]=="ـ") cl=cla[0];
    }
  rv=rv.replaceAll(cl,"<span class=red>"+zwjb+cl+"</span>"+zwja);
  clt=cl.replaceAll("ـ","");
  const al="ا";
  rv=rv.replaceAll(clt+al,"<span class=red>"+clt+"</span>"+al);
  }
 if(cla[1]=="ـ") rv=highlight_tatweel(rv);
 return rv;
 }

function highlight_tatweel(rv){
 rv=rv.replace(`<span class=red>ي</span>ـ`,`<span class="red">يـ</span>`);
 rv=rv.replace(`<span class=red>م</span>ـ`,`<span class="red">مـ</span>`);
 rv=rv.replace(`<span class=red>ئ</span>ـ`,`<span class="red">ئـ</span>`);
 rv=rv.replace(`<span class=red>ع</span>ـ`,`<span class="red">عـ</span>`);
 rv=rv.replace(`<span class=red>ش</span>ـ`,`<span class="red">شـ</span>`);
 rv=rv.replace(`<span class=red>ك</span>ـ`,`<span class="red">كـ</span>`);
 rv=rv.replace(`<span class=red>ه</span>ـ`,`<span class="red">هـ</span>`);
 rv=rv.replace(`<span class=red>ص</span>ـ`,`<span class="red">صـ</span>`);
 rv=rv.replace(`<span class=red>ح</span>ـ`,`<span class="red">حـ</span>`);
 rv=rv.replace(`<span class=red>غ</span>ـ`,`<span class="red">ـغـ</span>`);
 rv=rv.replace(`<span class=red>ض</span>ـ`,`<span class="red">ضـ</span>`);
 rv=rv.replace(`<span class=red>ج</span>ـ`,`<span class="red">جـ</span>`);
 rv=rv.replace(`<span class=red>خ</span>ـ`,`<span class="red">خـ</span>`);
 return rv;
}
var timer=0;
var k=0;
function play_lesson(){
  if(timer>0) {
    clearTimeout(timer);
    k=0;
    document.getElementById("play").innerHTML=PLAY;
//    load_page();
    location.reload();
    }
  if(timer==0){
    play_lesson_recursive();
    }
  }
function play_lesson_recursive(){
  load_page();
  var tp=1200; // time play
  document.getElementById("play").innerHTML=PAUSE;
  var wa=get_word_array(la[i]);
  var c=wa.length;
  var kp=0;
  var i0=i.toString();
  var i0=i0.padStart(2,"0");
  var k0=k.toString();
  var k0=k0.padStart(2,"0");
  if (k>0) kp=k-1;
  var k1=kp.toString();
  var k1=k1.padStart(2,"0");
  document.getElementById("w"+i0+k1).style.color="";
  document.getElementById("w"+i0+k0).style.color="#f00";
  ps(""+i0+k0);
  var syl=get_sylables(wa[k]);
  if(syl>2) tp=1800;
  console.log(`c:${c}, k:${k}, tp:${tp},${wa[k]}:${timer}`);
  k++;
  if(k<c) timer=setTimeout(play_lesson_recursive, tp); else {
    clearTimeout(timer);
    k=0;
    document.getElementById("play").innerHTML=PLAY;
    location.reload();
    }
  }

function get_sylables(t){
  t=t.replaceAll("ui^","wi^")
  t=t.replaceAll("^","")
  t=t.replaceAll("_","")
  t=t.replaceAll("uu","u")
  t=t.replaceAll("au","aw")
  t=t.replaceAll("ai","ay")
  t=t.replaceAll("oi","oy")
  t=t.replaceAll("ei","ey")
  t=t.replaceAll("ua","wa")
  t=t.replaceAll("ue","we")
  t=t.replaceAll("ia","ya")
  var a=t.split("a").length-1;
  var i=t.split("i").length-1;
  var u=t.split("u").length-1;
  var e=t.split("e").length-1;
  var o=t.split("o").length-1;
  var p=t.split("+").length-1;
  var bn=t.split("bn").length-1;
  var nm=t.split("nm").length-1;
  var nn=t.split("nn").length-1;
//  console.log(t);
  return a+i+e+u+o+p+bn+nm+nn;
  }

function get_word_array(t){
  t=t.replaceAll("|","")
  t=t.replaceAll("#","")
  t=t.replaceAll("-","")
  t=t.replaceAll(".","")
  t=t.replaceAll(",","")
  t=t.replaceAll("?","")
  t=t.replaceAll("   "," ")
  t=t.replaceAll("  "," ")
  var a=t.split(" ");
  return a;
  }

var prev_scroll_pos=window.pageYOffset;
window.onscroll=function() {
  var current_scroll_pos = window.pageYOffset;
  if (prev_scroll_pos > current_scroll_pos) {
  document.getElementById("ftb").style.bottom = "4px";
  } else {
  document.getElementById("ftb").style.bottom = "-50px";
  }
  prev_scroll_pos=current_scroll_pos;
  }

function toggle_buttons() {
  var ftb=document.getElementById("ftb");
  if (ftb.style.bottom=="4px") ftb.style.bottom = "-50px"; else ftb.style.bottom = "4px";
  }

function toggle_diacritics() {
  if(dcr==1) dcr=0; else dcr=1;
  load_page();
  }
 
function is_mobile() {
  return window.innerHeight > window.innerWidth;
  // return /Android|webOS|iPhone|BlackBerry|IEMobile/i.test(navigator.userAgent);
  }

function eng_to_kur(eng){
 var kur=eng;
 kur=kur.replaceAll("aa","آ");
 kur=kur.replaceAll("a^","أ");
 kur=kur.replaceAll("a_","إ");
 kur=kur.replaceAll("a:","ٱ");
 kur=kur.replaceAll("a","ا");
 kur=kur.replaceAll("b","ب");
 kur=kur.replaceAll("p","پ");
 kur=kur.replaceAll("t:","ث");
 kur=kur.replaceAll("t^","ط");
 kur=kur.replaceAll("t","ت");
 kur=kur.replaceAll("c^","چ");
 kur=kur.replaceAll("c","ج");
 kur=kur.replaceAll("h^","ح");
 kur=kur.replaceAll("x","خ");
 kur=kur.replaceAll("d:","ذ");
 kur=kur.replaceAll("d^","ظ");
 kur=kur.replaceAll("d","د");
 kur=kur.replaceAll("r^","ڕ");
 kur=kur.replaceAll("r","ر");
 kur=kur.replaceAll("z:","ض");
 kur=kur.replaceAll("z","ز");
 kur=kur.replaceAll("j","ژ");
 kur=kur.replaceAll("s:","ص");
 kur=kur.replaceAll("s^","ش");
 kur=kur.replaceAll("s","س");
 kur=kur.replaceAll("`^","غ");
 kur=kur.replaceAll("`","ع");
 kur=kur.replaceAll("f","ف");
 kur=kur.replaceAll("v","ڤ");
 kur=kur.replaceAll("q","ق");
 kur=kur.replaceAll("k","ك");
 kur=kur.replaceAll("g","گ");
 kur=kur.replaceAll("l^","ڵ");
 kur=kur.replaceAll("l","ل");
 kur=kur.replaceAll("m","م");
 kur=kur.replaceAll("n","ن");
 kur=kur.replaceAll("h","ه");
 kur=kur.replaceAll("e:","ة");
 kur=kur.replaceAll("e","ه‌");
 kur=kur.replaceAll("u^","ؤ");
 kur=kur.replaceAll("u","و");
 kur=kur.replaceAll("o","ۆ");
 kur=kur.replaceAll("i^","ێ");
 kur=kur.replaceAll("i:","ي");
 kur=kur.replaceAll("i","ی");
 kur=kur.replaceAll("<","ئ");
 kur=kur.replaceAll(">","ء");
 kur=kur.replaceAll("0","٠");
 kur=kur.replaceAll("1","١");
 kur=kur.replaceAll("2","٢");
 kur=kur.replaceAll("3","٣");
 kur=kur.replaceAll("4","٤");
 kur=kur.replaceAll("5","٥");
 kur=kur.replaceAll("6","٦");
 kur=kur.replaceAll("7","٧");
 kur=kur.replaceAll("8","٨");
 kur=kur.replaceAll("9","٩");
 kur=kur.replaceAll(",","،");
 kur=kur.replaceAll("_","ـ");
 kur=kur.replaceAll("?","؟");
 kur=kur.replaceAll("~:","\u064B"); // tanwin fat-ha
 kur=kur.replaceAll("&:","\u064C"); // tanwin damma
 kur=kur.replaceAll("@:","\u064D"); // tanwin kasra
 kur=kur.replaceAll("$:","\u0670"); // small alif
 kur=kur.replaceAll("~","\u064E");  // fat-ha
 kur=kur.replaceAll("&","\u064F");  // damma
 kur=kur.replaceAll("@","\u0650");  // kasra
 kur=kur.replaceAll("$","\u0651");  // shadda
//  kur=kur.replaceAll("%","");
// kur=kur.replaceAll("#","<br>");
 return kur;
 }

 function remove_diacritics(rv){
 rv=rv.replaceAll("a:","a");
 rv=rv.replaceAll("~:",""); // tanwin fat-ha
 rv=rv.replaceAll("&:",""); // tanwin damma
 rv=rv.replaceAll("@:",""); // tanwin kasra
 rv=rv.replaceAll("$:",""); // small alif
 rv=rv.replaceAll("~","");  // fat-ha
 rv=rv.replaceAll("&","");  // damma
 rv=rv.replaceAll("@","");  // kasra
 rv=rv.replaceAll("$","");  // shadda
 return rv;
 }

 var tta=[
   [
   ""
   ],
   [
   "pitekan|pitekan u us^ekan|xanuu",
   "xanuu|xanuu|xanuu|xanuu",
   "xanuuan|xanuu|xanuuan|xanuu|xanuuan|krm|krm|xanuu|krm|xanuuan",
   "duu xanuu|duu xanuu|duu xanuu|<agr|<agr|r^uunaki|duu xanuu|n",
   "brai bc^uuk|krm|brai bc^uuk|brai bc^uuk|krm|xanuu|duu xanuu|xanuuan",
   "xorak|xorak|brai bc^uuk|xorak|zuuzuu (nau)|xanuu|xanuuan|<agr|r^uunaki|xorak|z",
   "nuuri (nau)|r^azi (nau)|nuuri (nau)|(herduukian) serdanian krdm|nuri (nau)|i",
   "",
   ""
  ],
  [
   "",
   "bit|bit|bit|bit",
   "biut|bit|biut|bit|biut|||||",
   "duu xanuu|duu xanuu|duu xanuu|<agr|<agr|r^uunaki|duu xanuu|n",
   "brai bc^uuk|krm|brai bc^uuk|brai bc^uuk|krm|xanuu|duu xanuu|xanuuan",
   "xorak|xorak|brai bc^uuk|xorak|zuuzuu (nau)|xanuu|xanuuan|<agr|r^uunaki|xorak|z",
   "nuuri (nau)|r^azi (nau)|nuuri (nau)|(herduukian) serdanian krdm|nuri (nau)|i",
   "",
   ""
  ],
  [
   "",
   "house|house|house|house",
   "houses|house|houses|house|houses|worm|worm|house|worm|houses",
   "two houses|two houses|two houses|fire|fire|light|two houses|n",
   "young brother|worm|young brother|young brother|worm|house|two houses|houses",
   "food|food|young brother|food|Zoozoo (name)|house|houses|fire|light|food|z",
   "Noori (name)|Razi (name)|Noori (name)|(both) visited me|Noori (name)|i",
   "",
   "",
   ""
  ]
  ];

class WordTootip extends HTMLElement{
  constructor(){
    super();
    }
  connectedCallback(){
    this.render();
    }
  render(){
    this.addEventListener("mouseover", show_tooltip);
    this.addEventListener("click", show_tooltip);
    function show_tooltip() {
      // Array.from(document.getElementsByTagName('a')).forEach(function(item){item.outerHTML="";});
      var id=this.id;
      let i0=id.substring(0,2);
      let k0=id.substring(2);
      let i=parseInt(i0);
      let k=parseInt(k0);
      var tt=ttl==0?"||||||||||||||||||||":tta[ttl][i];
      var ttwa=tt.split("|");
      // console.log(id,i,k,ttwa);
      var tt=document.createElement('t-t');
      tt.setAttribute("id", "t"+k);
      let mn=ttwa[k];
      if(ttl==1 || ttl==2) mn=eng_to_kur(mn);
      tt.innerHTML=`<p>${mn}</p>`; //<b></b>
      // console.log(tt);
      if(ttl) this.parentElement.appendChild(tt);
      // var ael=document.getElementsByTagName("b")[0];
      var ttw=tt.offsetWidth;
      var welw=this.offsetWidth;
      var well=this.offsetLeft;
      var ww=window.innerWidth;
      var xt=-(ttw/2)+(welw/2);
      // var nr=well+xt; // right
      var nr=well+ttw; // right
      var nl=well-(ttw/2)+(welw/2); // left
      var xta=0;
      if(nr>ww) {xta=nr-ww; xt=-xta;}
      if(nl<0) {xt-=nl; xta=nl;}
      var st=`left:${this.offsetLeft+xt}px; top:${this.offsetTop-tt.offsetHeight}px;`;
      tt.setAttribute("style",st);
      // if(xta) ael.style.transform="translate("+xta+"px)";

      if(ttl) document.getElementById("t"+k).addEventListener("click", function() {
          console.log("tt click");
          });
      }
    this.addEventListener("mouseout", function() {
        Array.from(document.getElementsByTagName('t-t')).forEach(function(item){item.outerHTML="";});
        // console.log("mouseout");
        });
    document.getElementById("txt").addEventListener("click", function() {
        // Array.from(document.getElementsByTagName('a')).forEach(function(item){item.outerHTML="";});
        console.log("body");
        });
    // document.getElementById("body").addEventListener("click", function() {
    // this.addEventListener("click", function() {
        // console.log("click");
        // });

    }
  }
class ToolTip extends HTMLElement{
  constructor(){super();}
  }
window.customElements.define("w-d", WordTootip);
window.customElements.define("t-t", ToolTip);

</script>
</body>
</html>

<!--
=====
TO-DO
=====
add more pages
add more sound
remove tashkil

====
DONE
====
remove diacritics
add translations (tooltip)
add line for calligraphy
make settings: voice, lextter red
add list of letters
add list of letters, words and pictures
add credits
add lesson number
add shortcut keys
read lesson
study letter become red
make buttons work
read each word separatly
add buttons for read, next and content
add static first lesson
mouseover text color to red
onclick read text
font amiri
responsive designs for portrait and landscape
-->
